{% extends "genericLayout.twig"%}
{% block content %}
    <div class="row">
        <div class="col-md-3">
            <div class="list-group">
                <button type="button" class="list-group-item list-group-item-action active">
                    Cras justo odio
                </button>
                <button type="button" class="list-group-item list-group-item-action">Dapibus ac facilisis in</button>
                <button type="button" class="list-group-item list-group-item-action">Morbi leo risus</button>
                <button type="button" class="list-group-item list-group-item-action">Porta ac consectetur ac</button>
                <button type="button" class="list-group-item list-group-item-action" disabled>Vestibulum at eros</button>
            </div>
            <br>
            <form class="form-inline my-2 my-lg-0" id="searchForm" onsubmit="return ajax_listen(this.id, 'index.php?controller=Category&action=searchP', searchProducts)">
                <select class="selectpicker  show-menu-arrow form-control" name="category" id="category">
                    <option>Todas las categorias</option>
                    {% for element in categories %}
                        <option value="{{ element.id }}">{{ element.name }}</option>
                    {% endfor %}
                </select>
                <input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search" name="search" id="search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit"><i class="fas fa-search"></i> Search</button>
            </form>
        </div>
        <div class="col-md-9">
            <div id="modelContainter"></div>
            <div class="modal fade" id="ProductModal" tabindex="-1" role="dialog" aria-labelledby="ProductModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <form id="product" onsubmit="return ajax_listen(this.id, 'index.php?controller=Product&action=addCart', addCart)">
                            
                            <div class="modal-header">
                                <h5 name="nameProduct" class="modal-title" id="ProductModalLabel">Modal title</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div id="data">
                                <input type="hidden" name="idProduct">
                                <input type="hidden" name="nameProduct">
                                <input type="hidden" name="prizeProduct">
                                <input type="hidden" name="imgProduct">
                            </div>
                            <div class="modal-body"></div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <input type="submit" class="btn btn-primary" id="buy" value="Comprar">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="row">
                {% if search is defined %}
                    {% for product in search %}
                        <div class="card col-md-4 col-6 p-0" style="width: 18rem;">
                            <img id="{{ product.id }}" src="img/productImg/{{ product.img }}" class="card-img-top" alt="..." onclick="modal(this.id)" data-toggle="modal" data-target="#ProductModal">
                            <div class="card-body">
                                <p class="card-text">
                                    {{ product.name }}</p>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    {% for product in products %}
                        <div class="card col-md-4 col-6 p-0" style="width: 18rem;">
                            <img id="{{ product.id }}" src="img/productImg/{{ product.img }}" class="card-img-top" alt="..." onclick="modal(this.id)" data-toggle="modal" data-target="#ProductModal">
                            <div class="card-body">
                                <p class="card-text">
                                    {{ product.name }}</p>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </div>
    </div>
{% endblock %}